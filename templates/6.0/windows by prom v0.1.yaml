zabbix_export:
  version: '6.0'
  date: '2024-01-17T01:57:21Z'
  groups:
    - uuid: 846977d1dfed4968bc5f8bdb363285bc
      name: 'Templates/Operating systems'
  templates:
    - uuid: 74c966c74d874b14ab4066913c5c81b9
      template: 'Windows by Prom'
      name: 'Windows by Prom'
      description: |
        Official Linux template using node exporter.
        
        Known Issues:
        
          Description: node_exporter v0.16.0 renamed many metrics. CPU utilization for 'guest' and 'guest_nice' metrics are not supported in this template with node_exporter < 0.16. Disk IO metrics are not supported. Other metrics provided as 'best effort'.
        See https://github.com/prometheus/node_exporter/releases/tag/v0.16.0 for details.
          Version: below 0.16.0
        
          Description: metric node_network_info with label 'device' cannot be found, so network discovery is not possible.
          Version: below 0.18
        
        You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/387225-discussion-thread-for-official-zabbix-template-for-linux
        
        Generated by official Zabbix template tool "Templator"
      groups:
        - name: 'Templates/Operating systems'
      items:
        - uuid: 2fa28c095fcd40e6914fd00803735fba
          name: 'Windows: Get node_exporter metrics'
          type: HTTP_AGENT
          key: node_exporter.get
          history: 1h
          trends: '0'
          value_type: TEXT
          timeout: 30s
          url: 'http://{HOST.CONN}:{$NODE_EXPORTER_PORT}/metrics'
          tags:
            - tag: component
              value: raw
            - tag: tool
              value: prometheus
            - tag: type
              value: 'http agent'
          triggers:
            - uuid: f2f3b1e0720a4038994ffed0839ee750
              expression: 'nodata(/Windows by Prom/node_exporter.get,30m)=1'
              name: 'Windows: node_exporter is not available'
              event_name: 'node_exporter is not available (or no data for 30m)'
              priority: WARNING
              description: 'Failed to fetch system metrics from node_exporter in time.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: availability
        - uuid: 85b3ea232e7441248892507d999c1ca6
          name: 'Windows: Number of logical processors'
          type: DEPENDENT
          key: windows_cs_logical_processors
          delay: '0'
          preprocessing:
            - type: PROMETHEUS_PATTERN
              parameters:
                - windows_cs_logical_processors
                - value
                - ''
            - type: JAVASCRIPT
              parameters:
                - |
                  // Converter para formato regular
                  var resultado = parseFloat(value);
                  
                  // Exibir o resultado
                  return(resultado);
          master_item:
            key: node_exporter.get
          tags:
            - tag: tool
              value: prometheus
            - tag: type
              value: 'dependent item'
        - uuid: a8b8a48739ae4d67850abe6363be5549
          name: 'Windows: Physical memory'
          type: DEPENDENT
          key: windows_cs_physical_memory_bytes
          delay: '0'
          units: B
          preprocessing:
            - type: PROMETHEUS_PATTERN
              parameters:
                - windows_cs_physical_memory_bytes
                - value
                - ''
            - type: JAVASCRIPT
              parameters:
                - |
                  // Converter para formato regular
                  var resultado = parseFloat(value);
                  
                  // Exibir o resultado
                  return(resultado);
          master_item:
            key: node_exporter.get
          tags:
            - tag: tool
              value: prometheus
            - tag: type
              value: 'dependent item'
        - uuid: df951ca7688d4d51b65fb95baa9a4df4
          name: 'Windows: Operacional system name'
          type: DEPENDENT
          key: windows_os_info
          delay: '0'
          trends: '0'
          value_type: TEXT
          preprocessing:
            - type: PROMETHEUS_PATTERN
              parameters:
                - windows_os_info
                - label
                - product
          master_item:
            key: node_exporter.get
          tags:
            - tag: tool
              value: prometheus
            - tag: type
              value: 'dependent item'
        - uuid: 97543ab05e524518af72b3d87fafe32b
          name: 'Windows: Operacional System Version'
          type: DEPENDENT
          key: windows_os_info.version
          delay: '0'
          trends: '0'
          value_type: TEXT
          preprocessing:
            - type: PROMETHEUS_PATTERN
              parameters:
                - windows_os_info
                - label
                - version
          master_item:
            key: node_exporter.get
          tags:
            - tag: tool
              value: prometheus
            - tag: type
              value: 'dependent item'
        - uuid: 55e14d9f939844a3ab526b15a4565d2b
          name: 'Windows: Physical memory free'
          type: DEPENDENT
          key: windows_os_physical_memory_free_bytes
          delay: '0'
          units: B
          preprocessing:
            - type: PROMETHEUS_PATTERN
              parameters:
                - windows_os_physical_memory_free_bytes
                - value
                - ''
            - type: JAVASCRIPT
              parameters:
                - |
                  // Converter para formato regular
                  var resultado = parseFloat(value);
                  
                  // Exibir o resultado
                  return(resultado);
          master_item:
            key: node_exporter.get
          tags:
            - tag: tool
              value: prometheus
            - tag: type
              value: 'dependent item'
        - uuid: ac1d0a068753458486d81bcb1d9b23c0
          name: 'Windows: Number of processes'
          type: DEPENDENT
          key: windows_os_processes
          delay: '0'
          preprocessing:
            - type: PROMETHEUS_PATTERN
              parameters:
                - windows_os_processes
                - value
                - ''
            - type: JAVASCRIPT
              parameters:
                - |
                  // Converter para formato regular
                  var resultado = parseFloat(value);
                  
                  // Exibir o resultado
                  return(resultado);
          master_item:
            key: node_exporter.get
          tags:
            - tag: tool
              value: prometheus
            - tag: type
              value: 'dependent item'
        - uuid: 81409073446b4ffcaa4ad9c985732d31
          name: 'Windows: Timezone'
          type: DEPENDENT
          key: windows_os_timezone
          delay: '0'
          trends: '0'
          value_type: TEXT
          preprocessing:
            - type: PROMETHEUS_PATTERN
              parameters:
                - windows_os_timezone
                - value
                - ''
          master_item:
            key: node_exporter.get
          tags:
            - tag: tool
              value: prometheus
            - tag: type
              value: 'dependent item'
        - uuid: 394a077b64b44809964a7b0cccfbc358
          name: 'Windows: Number of users'
          type: DEPENDENT
          key: windows_os_users
          delay: '0'
          preprocessing:
            - type: PROMETHEUS_PATTERN
              parameters:
                - windows_os_users
                - value
                - ''
            - type: JAVASCRIPT
              parameters:
                - |
                  // Converter para formato regular
                  var resultado = parseFloat(value);
                  
                  // Exibir o resultado
                  return(resultado);
          master_item:
            key: node_exporter.get
          tags:
            - tag: tool
              value: prometheus
            - tag: type
              value: 'dependent item'
        - uuid: 3c1a5eca066241e6bd4692bfd44deee3
          name: 'Windows: Virtual memory free'
          type: DEPENDENT
          key: windows_os_virtual_memory_free_bytes
          delay: '0'
          units: B
          preprocessing:
            - type: PROMETHEUS_PATTERN
              parameters:
                - windows_os_virtual_memory_free_bytes
                - value
                - ''
            - type: JAVASCRIPT
              parameters:
                - |
                  // Converter para formato regular
                  var resultado = parseFloat(value);
                  
                  // Exibir o resultado
                  return(resultado);
          master_item:
            key: node_exporter.get
          tags:
            - tag: tool
              value: prometheus
            - tag: type
              value: 'dependent item'
        - uuid: 09e391da66194ae883f58c9314f8e53e
          name: 'Windows: System context switches total'
          type: DEPENDENT
          key: windows_system_context_switches_total
          delay: '0'
          units: B
          preprocessing:
            - type: PROMETHEUS_PATTERN
              parameters:
                - windows_system_context_switches_total
                - value
                - ''
            - type: JAVASCRIPT
              parameters:
                - |
                  // Converter para formato regular
                  var resultado = parseFloat(value);
                  
                  // Exibir o resultado
                  return(resultado);
          master_item:
            key: node_exporter.get
          tags:
            - tag: tool
              value: prometheus
            - tag: type
              value: 'dependent item'
        - uuid: 9332abce3dcc4e159920ae349e832fc4
          name: 'Windows: Processor queue length'
          type: DEPENDENT
          key: windows_system_processor_queue_length
          delay: '0'
          preprocessing:
            - type: PROMETHEUS_PATTERN
              parameters:
                - windows_system_processor_queue_length
                - value
                - ''
            - type: JAVASCRIPT
              parameters:
                - |
                  // Converter para formato regular
                  var resultado = parseFloat(value);
                  
                  // Exibir o resultado
                  return(resultado);
          master_item:
            key: node_exporter.get
          tags:
            - tag: tool
              value: prometheus
            - tag: type
              value: 'dependent item'
        - uuid: 00657b4c870c42a49471184d7679f2ab
          name: 'Windows: System uptime'
          type: DEPENDENT
          key: windows_system_system_up_time
          delay: '0'
          value_type: FLOAT
          units: B
          preprocessing:
            - type: PROMETHEUS_PATTERN
              parameters:
                - windows_system_system_up_time
                - value
                - ''
            - type: JAVASCRIPT
              parameters:
                - |
                  // Converter para formato regular
                  var resultado = parseFloat(value);
                  
                  // Exibir o resultado
                  return(resultado);
          master_item:
            key: node_exporter.get
          tags:
            - tag: tool
              value: prometheus
            - tag: type
              value: 'dependent item'
        - uuid: 56f7068cad9249afbef5a184bb0d21d2
          name: 'Windows: System threads'
          type: DEPENDENT
          key: windows_system_threads
          delay: '0'
          preprocessing:
            - type: PROMETHEUS_PATTERN
              parameters:
                - windows_system_threads
                - value
                - ''
            - type: JAVASCRIPT
              parameters:
                - |
                  // Converter para formato regular
                  var resultado = parseFloat(value);
                  
                  // Exibir o resultado
                  return(resultado);
          master_item:
            key: node_exporter.get
          tags:
            - tag: tool
              value: prometheus
            - tag: type
              value: 'dependent item'
        - uuid: 71ed714b4474411e83bb1d027d4cecf6
          name: 'Windows: Textfile scrape error'
          type: DEPENDENT
          key: windows_textfile_scrape_error
          delay: '0'
          trends: '0'
          value_type: TEXT
          description: 'windows_textfile_scrape_error 1 if there was an error opening or reading a file, 0 otherwise'
          preprocessing:
            - type: PROMETHEUS_PATTERN
              parameters:
                - windows_textfile_scrape_error
                - value
                - ''
          master_item:
            key: node_exporter.get
          tags:
            - tag: tool
              value: prometheus
            - tag: type
              value: 'dependent item'
      tags:
        - tag: class
          value: os
        - tag: target
          value: linux
      macros:
        - macro: '{$CPU.UTIL.CRIT}'
          value: '90'
        - macro: '{$IF.ERRORS.WARN}'
          value: '2'
        - macro: '{$IF.UTIL.MAX}'
          value: '90'
        - macro: '{$IFCONTROL}'
          value: '1'
        - macro: '{$KERNEL.MAXFILES.MIN}'
          value: '256'
        - macro: '{$LOAD_AVG_PER_CPU.MAX.WARN}'
          value: '1.5'
          description: 'Load per CPU considered sustainable. Tune if needed.'
        - macro: '{$MEMORY.AVAILABLE.MIN}'
          value: 20M
        - macro: '{$MEMORY.UTIL.MAX}'
          value: '90'
        - macro: '{$NET.IF.IFALIAS.MATCHES}'
          value: '^.*$'
        - macro: '{$NET.IF.IFALIAS.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
        - macro: '{$NET.IF.IFNAME.MATCHES}'
          value: '^.*$'
        - macro: '{$NET.IF.IFNAME.NOT_MATCHES}'
          value: '(^Software Loopback Interface|^NULL[0-9.]*$|^[Ll]o[0-9.]*$|^[Ss]ystem$|^Nu[0-9.]*$|^veth[0-9A-z]+$|docker[0-9]+|br-[a-z0-9]{12})'
          description: 'Filter out loopbacks, nulls, docker veth links and docker0 bridge by default.'
        - macro: '{$NET.IF.IFOPERSTATUS.MATCHES}'
          value: '^.*$'
        - macro: '{$NET.IF.IFOPERSTATUS.NOT_MATCHES}'
          value: ^7$
          description: 'Ignore notPresent(7).'
        - macro: '{$NODE_EXPORTER_PORT}'
          value: '9100'
          description: 'TCP Port node_exporter is listening on.'
        - macro: '{$SWAP.PFREE.MIN.WARN}'
          value: '50'
        - macro: '{$SYSTEM.FUZZYTIME.MAX}'
          value: '60'
        - macro: '{$VFS.DEV.DEVNAME.MATCHES}'
          value: .+
          description: 'This macro is used in block devices discovery. Can be overridden on the host or linked template level.'
        - macro: '{$VFS.DEV.DEVNAME.NOT_MATCHES}'
          value: '^(loop[0-9]*|sd[a-z][0-9]+|nbd[0-9]+|sr[0-9]+|fd[0-9]+|dm-[0-9]+|ram[0-9]+|ploop[a-z0-9]+|md[0-9]*|hcp[0-9]*|zram[0-9]*)'
          description: 'This macro is used in block devices discovery. Can be overridden on the host or linked template level.'
        - macro: '{$VFS.DEV.READ.AWAIT.WARN}'
          value: '20'
          description: 'Disk read average response time (in ms) before the trigger would fire.'
        - macro: '{$VFS.DEV.WRITE.AWAIT.WARN}'
          value: '20'
          description: 'Disk write average response time (in ms) before the trigger would fire.'
        - macro: '{$VFS.FS.FREE.MIN.CRIT}'
          value: 5G
          description: 'The critical threshold of the filesystem utilization.'
        - macro: '{$VFS.FS.FREE.MIN.WARN}'
          value: 10G
          description: 'The warning threshold of the filesystem utilization.'
        - macro: '{$VFS.FS.FSDEVICE.MATCHES}'
          value: ^.+$
          description: 'This macro is used in filesystems discovery. Can be overridden on the host or linked template level.'
        - macro: '{$VFS.FS.FSDEVICE.NOT_MATCHES}'
          value: ^\s$
          description: 'This macro is used in filesystems discovery. Can be overridden on the host or linked template level.'
        - macro: '{$VFS.FS.FSNAME.MATCHES}'
          value: .+
          description: 'This macro is used in filesystems discovery. Can be overridden on the host or linked template level.'
        - macro: '{$VFS.FS.FSNAME.NOT_MATCHES}'
          value: ^(/dev|/sys|/run|/proc|.+/shm$)
          description: 'This macro is used in filesystems discovery. Can be overridden on the host or linked template level.'
        - macro: '{$VFS.FS.FSTYPE.MATCHES}'
          value: ^(btrfs|ext2|ext3|ext4|reiser|xfs|ffs|ufs|jfs|jfs2|vxfs|hfs|apfs|refs|ntfs|fat32|zfs)$
          description: 'This macro is used in filesystems discovery. Can be overridden on the host or linked template level.'
        - macro: '{$VFS.FS.FSTYPE.NOT_MATCHES}'
          value: ^\s$
          description: 'This macro is used in filesystems discovery. Can be overridden on the host or linked template level.'
        - macro: '{$VFS.FS.INODE.PFREE.MIN.CRIT}'
          value: '10'
        - macro: '{$VFS.FS.INODE.PFREE.MIN.WARN}'
          value: '20'
        - macro: '{$VFS.FS.PUSED.MAX.CRIT}'
          value: '90'
        - macro: '{$VFS.FS.PUSED.MAX.WARN}'
          value: '80'
      valuemaps:
        - uuid: b5617e5d95d84f4e872891931bb00d12
          name: ifOperStatus
          mappings:
            - value: '0'
              newvalue: unknown
            - value: '1'
              newvalue: notpresent
            - value: '2'
              newvalue: down
            - value: '3'
              newvalue: lowerlayerdown
            - value: '4'
              newvalue: testing
            - value: '5'
              newvalue: dormant
            - value: '6'
              newvalue: up
        - uuid: 4679b93b548444cbb44fd584a1aae745
          name: 'Linux::Interface protocol types'
          mappings:
            - value: '0'
              newvalue: 'from KA9Q: NET/ROM pseudo'
            - value: '1'
              newvalue: Ethernet
            - value: '2'
              newvalue: 'Experimental Ethernet'
            - value: '3'
              newvalue: 'AX.25 Level 2'
            - value: '4'
              newvalue: 'PROnet token ring'
            - value: '5'
              newvalue: Chaosnet
            - value: '6'
              newvalue: 'IEEE 802.2 Ethernet/TR/TB'
            - value: '7'
              newvalue: ARCnet
            - value: '8'
              newvalue: APPLEtalk
            - value: '15'
              newvalue: 'Frame Relay DLCI'
            - value: '19'
              newvalue: ATM
            - value: '23'
              newvalue: 'Metricom STRIP (new IANA id)'
            - value: '24'
              newvalue: 'IEEE 1394 IPv4 - RFC 2734'
            - value: '27'
              newvalue: EUI-64
            - value: '32'
              newvalue: InfiniBand
            - value: '256'
              newvalue: ARPHRD_SLIP
            - value: '257'
              newvalue: ARPHRD_CSLIP
            - value: '258'
              newvalue: ARPHRD_SLIP6
            - value: '259'
              newvalue: ARPHRD_CSLIP6
            - value: '260'
              newvalue: 'Notional KISS type'
            - value: '264'
              newvalue: ARPHRD_ADAPT
            - value: '270'
              newvalue: ARPHRD_ROSE
            - value: '271'
              newvalue: 'CCITT X.25'
            - value: '272'
              newvalue: 'Boards with X.25 in firmware'
            - value: '280'
              newvalue: 'Controller Area Network'
            - value: '512'
              newvalue: ARPHRD_PPP
            - value: '513'
              newvalue: 'Cisco HDLC'
            - value: '516'
              newvalue: LAPB
            - value: '517'
              newvalue: 'Digital''s DDCMP protocol'
            - value: '518'
              newvalue: 'Raw HDLC'
            - value: '519'
              newvalue: 'Raw IP'
            - value: '768'
              newvalue: 'IPIP tunnel'
            - value: '769'
              newvalue: 'IP6IP6 tunnel'
            - value: '770'
              newvalue: 'Frame Relay Access Device'
            - value: '771'
              newvalue: 'SKIP vif'
            - value: '772'
              newvalue: 'Loopback device'
            - value: '773'
              newvalue: 'Localtalk device'
            - value: '774'
              newvalue: 'Fiber Distributed Data Interface'
            - value: '775'
              newvalue: 'AP1000 BIF'
            - value: '776'
              newvalue: 'sit0 device - IPv6-in-IPv4'
            - value: '777'
              newvalue: 'IP over DDP tunneller'
            - value: '778'
              newvalue: 'GRE over IP'
            - value: '779'
              newvalue: 'PIMSM register interface'
            - value: '780'
              newvalue: 'High Performance Parallel Interface'
            - value: '781'
              newvalue: 'Nexus 64Mbps Ash'
            - value: '782'
              newvalue: 'Acorn Econet'
            - value: '783'
              newvalue: Linux-IrDA
            - value: '784'
              newvalue: 'Point to point fibrechannel'
            - value: '785'
              newvalue: 'Fibrechannel arbitrated loop'
            - value: '786'
              newvalue: 'Fibrechannel public loop'
            - value: '787'
              newvalue: 'Fibrechannel fabric'
            - value: '800'
              newvalue: 'Magic type ident for TR'
            - value: '801'
              newvalue: 'IEEE 802.11'
            - value: '802'
              newvalue: 'IEEE 802.11 + Prism2 header'
            - value: '803'
              newvalue: 'IEEE 802.11 + radiotap header'
            - value: '804'
              newvalue: ARPHRD_IEEE802154
            - value: '805'
              newvalue: 'IEEE 802.15.4 network monitor'
            - value: '820'
              newvalue: 'PhoNet media type'
            - value: '821'
              newvalue: 'PhoNet pipe header'
            - value: '822'
              newvalue: 'CAIF media type'
            - value: '823'
              newvalue: 'GRE over IPv6'
            - value: '824'
              newvalue: 'Netlink header'
            - value: '825'
              newvalue: 'IPv6 over LoWPAN'
            - value: '826'
              newvalue: 'Vsock monitor header'
